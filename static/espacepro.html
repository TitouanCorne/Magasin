<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="favicon.ico"/>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link href="./mainbis.css" rel="stylesheet" />
    <title>Magasin en ligne</title>
  </head>
  <body>
    <div class="container-fluid">
      <nav class="navbar">
        <ul>
          <li><a href="index.html">Accueil</a></li>
        </ul>
      </nav>
      <div class="container" id="div_form">
        <form id="login">
          <label for="MDP">Mot de passe administrateur :</label>
          <input type="text" name="MDP" id="MDP"><br><br>
        </form>
        <form id="myForm">
          <label for="nv_nom">Nom :</label>
          <input type="text" name="nom" id="nv_nom"><br><br>
          <label for="nv_dimensions">Dimensions :</label>
          <input type="text" name="dimensions" id="nv_dimensions"><br><br>
          <label for="nv_prix">Prix :</label>
          <input type="text" name="prix" id="nv_prix"><br><br>
          <label for="nv_type">Type:</label>
          <select name="type" id="nv_type">
          <option value=""></option>
          <option value="table">Table</option>
          <option value="chaise">Chaise</option>
          <option value="divers">Divers</option>
          </select><br><br>

          <label for="nv_photo">Photo :</label>
          <input type="text" name="photo" id="nv_photo"><br><br>
          
          <input type="submit" value="Envoyer">
        </form>
      </div>
  </div>
  </body>

  <script>
    document.getElementById('myForm').addEventListener('submit', function(event) {
    event.preventDefault();
    MDP = document.getElementById("MDP").value;
    if (MDP == "devweb"){ //vérification mot de passe
      let formData = new FormData(event.target);
      let data = {};
      formData.forEach((value, key) => {
          data[key] = value;
      });
      // ...
      fetch('/submit', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
      })
      .then(response => response.json()) // handle the response as json
      .then(data => {
          console.log(data);
          // do something with the response data
      })
      .catch(err => {
        console.log(err);
      });
      }
    else{
        //si le mot de passe n'est pas le bon
        window.alert("Mot de passe incorrect !");
      }

    });
  </script>
  <script>
//     const db = require("../back/db")
//     function add_db(NOM, DIMENSIONS, TYPE, PRIX, PHOTO, MDP){
//       if (MDP == "devweb"){ //vérification mot de passe
//         //ajouter l'élément dans la base de donnée
//         console.log("c'est le bon mdp")
//         db.model.Product.create({
//           nom: NOM,
//           dimensions: DIMENSIONS,
//           prix: PRIX,
//           type: TYPE,
//           photo: PHOTO,})
//       }
//       else if (TYPE != "chaise" || TYPE != "table"){
//         TYPE = "divers"
//       }
//       else{
//         //afficher un message d'erreur "mot de passe incorrect"
//         window.alert("Mot de passe incorrect !");
//       }
//     }
//     document.getElementById("valider").addEventListener("click", (event) => {
//       NOM = document.getElementById("nv_nom").value;
//       DIMENSIONS = document.getElementById("nv_dimensions").value;
//       TYPE = document.getElementById("nv_type").value;
//       PRIX = document.getElementById("nv_prix").value;
//       PHOTO = document.getElementById("photo").value;
//       MDP = document.getElementById("mdp").value;
//       add_db(NOM, DIMENSIONS, TYPE, PRIX, PHOTO, MDP)
//     })

  
// éviter que l'utilisateur ait accès à l'HTML pour ne pas qu'il ait accès au mdp
document.addEventListener("keydown", function (event){
    if (event.ctrlKey){
       event.preventDefault();
    }
    if(event.keyCode == 123){
       event.preventDefault();
    }
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
</html>
